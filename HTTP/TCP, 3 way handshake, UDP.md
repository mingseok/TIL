## TCP, 3 way handshake, UDP

### 인터넷 프로토콜 스택의 4계층

![이미지](/programming/img/HTTP2.PNG)


<br/><br/>

3번과 4번을 잘보면

파란색 밖에 녹색과 노란색이 씌어져 있다.

![이미지](/programming/img/HTTP3.PNG)


<br/>

### 패킷이란?

즉, 실제 택배 박스 보내듯이 비슷한 느낌이라고 생각하면 된다.


<br/>

### IP 패킷이란??

출발지 IP 랑 목적지 IP가 있다.


![이미지](/programming/img/HTTP4.PNG)

<br/><br/>

## TCP/IP 패킷 이란??

IP 만으로 해결이 안되었던 순서 제어 문제나 다른 문제들을 

사진으로 나와 있듯이 저런 것들을 해결해 준다.

![이미지](/programming/img/HTTP5.PNG)

<br/><br/>

## TCP 특징

### 전송 제어 프로토콜

- 연결지향 (설명: “재랑 나랑 연결이 됬나? 안됬나? 확인을 하고 연결을 한 후에 메세지를 보낸다”)
- 데이터 전달 보증 (설명: “내가 메세지를 보냈다, 그런데 이 패킷이 중간에 누락이 되었다.)
    
     그러면 내가 누락 되었다는 것을 알 수 있는 것이다.
    
- 순서 보장


<br/>

### 연결지향 - TCP 3 way handshake (”TCP 연결 되었어요” 말한다)

1. 클라이언트에서 서버로 SYN 을 보낸다

2. 서버에서 “엇!! 왓네!!” 하고 ACK(=확인이요) 라는 답이랑 다시 SYN을 클라이언트로 보낸다.
3. 그리고 클라이언트가 “엇!! 왔네!!” 답장을 ACK(=확인이요) 서버에게 한다.

<br/>

이렇게 하면 클라이언트도 서버를 믿을 수 있고, 서버도 클라이언트를 믿을 수 있게 되는 것이다.



그러면 “우리가 연결이 되었구나” 라고 생각 하고, 마지막으로 데이터 전송을 하는 것이다.

중요한 것은 가상인 것이다. 중간에 얼마나 많은 중계소가 있는가 그것들을 전부 알 수 없으므로

“우리끼리 연결 되었구나” 생각하는 것이다.

![이미지](/programming/img/HTTP6.PNG)


<br/>

## 순서 보장

기본적으로는 서버가 클라이언트한테 “2번부터 다시 보내!!” 말한다

그러면 클라이언트는 다시 2번부터 다시 보내는 것이다.

![이미지](/programming/img/HTTP7.PNG)

신뢰할 수 있는 것.

<br/>

### **이 모든게 그냥 되는 것이 아니라, 위에 보면 TCP/IP 패킷에 의해 되는 것이다.**
즉, 출발지 IP 목적지, 전송 제어, 순서, 검증 정보 등등이 추가가 되어 있기에 
이렇게 가능한 것이다.

<br/>

## UDP 특징

### ‘포트’ 라는게 추가 되는 것이다.

포트 설명)

한개의 PC에 IP는 한개 이다 !!

그런데 여기서 게임, 노래, 영화 다 할 수 있다.

그런데 게임용 패킷, 노래 패킷, 영화 패킷을 어떻게 구분 하지??

라고 할때 사용하는 것이 ‘포트’ 이다.

- 햐얀 도화지에 비유(기능이 거의 없음)

- 연결지향 - TCP 3 way handshake X
- 데이터 전달 보증 X
- 순서 보장 X
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름

### 정리

- IP와 거의 같다. + PORT + 체크섬 정도만 추가

- 애플렠이션에 추가 작업 필요


<br/>


>**Reference** <br/>모든 개발자를 위한 HTTP 웹 기본 지식 : https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC