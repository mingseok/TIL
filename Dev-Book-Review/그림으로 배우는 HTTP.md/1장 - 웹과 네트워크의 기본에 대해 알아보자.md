## 1장 - 웹과 네트워크의 기본에 대해 알아보자.

## HTTP는 (Hyper Text Transfer Protocol) =하이퍼 텍스트 전송 프로토콜

인터넷에서 데이터를 주고받을 수 있는 프로토콜 입니다. 

(=WWW에 내재된 프로토콜)

<br/>

프로토콜은 규칙이라고 생각하시면 됩니다. 

이렇게 규칙을 정해두었기 때문에, 모든 프로그램이 이 규칙에 맞춰 개발해서 서로 정보를 교환할 수 있게 된 것입니다.

<br/>

HTTP는 무상태 프로토콜이며, 

이는 서버가 두 요청 간에 어떠한 상태나 데이터를 유지하지 않음을 의미한다. 

(상태를 유지하기 위한 노력으로 Cookie와 Session을 사용한다.)


<br/>


## 웹은 HTTP로 나타낸다.

```
주소 입력란에 URL을 입력했을 때 어떻게 해서 웹 페이지가 보여지는지 알고 있나요?
```

물론, 아무것도 없는데 웹 페이지가 표시 될 수는 없고,

URL에 의지해서 웹 서버로부터 리소스라고 불리는 파일 등의 정보를 얻고 있는 것입니다.

이때, 서버로 요청 하는 웹 브라우저 등을 클라이언트라고 부릅니다.

<br/>

### 중요한 것은

클라이언트에서 서버까지 일련의 흐름을 결정하고 있는 것은 웹에서 HTTP이라 불리는 프로토콜이라고 합니다.

- 프로토콜이라는 의미는 “약속” 즉, 웹은 HTTP라는 약속을 사용한 통신으로 이루어져 있습니다.

<br/><br/>

## HTTP의 역사.

HTTP의 시작은 멀리 떨어져 있는 동료 연구자와 지식을 공용하게 할 수 있도록 하기 위해 

최초로 고안한 것은 여러 문서를 상호간에 관련 짓는 “하이퍼텍스트” 의해 참조할 수 있는 

“WWW”의 기본 개념이 되는 것이라고 합니다.

<br/><br/>

## WWW는 무엇인가?

WWW는 웹 브라우저 입니다. (크롬, 오페라, 사파리 등,,) 

즉, 하이퍼텍스트를 열람 할 수 있는 ‘클라이언트 애플리케이션’ 명칭이라고 볼 수 있습니다.  (=WWW 혹은 웹이라고 불린다)

WWW를 구성하는 기술로는 문서 기술 언어로는 HTML, 문서 전송 프로토콜로는 HTTP, 
문서의 주소를 지정하는 방법으로는 URL 등 

세 가지가 있습니다.

<br/><br/>

## HTTP/0.9? , HTTP/1.0? , HTTP/1.1?

HTTP/0.9 : HTTP가 등장한 때는 1990년인데, 정식 버전은 아닙니다.

HTTP/1.0 : HTTP가 정식으로 나온 버전으로 초기 사양이지만 현재에도 아직 많은 서버상에서 헌역으로 가동되고 있는 사양이라고 합니다.

HTTP/1.0 : 현재 가장 많이 사용되는 버전이라고 합니다.

<br/>

HTTP가 등장한 당시에 주로 텍스트를 전송하기 위한 프로토콜이었지만, 

프로토콜 자체가 상당히 심플하기에 여러 가지 응용 방법을 고려해 기능이 계속해서 추가 되고 있다는 것입니다. 

그리하여 지금은 웹이라는 틀을 넘어서 다양하게 사용되는 프로토콜이라고 필자는 알려주고 있습니다.

<br/><br/>

## 네트워크의 기본은 TCP/IP

인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있습니다. (HTTP는 그중 하나이다.)

컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 서로 같은 방법으로 통신하지 않으면 안된다는 점입니다.

<br/>

### 예를 들어, 이런 규칙을 결정할 필요가 있습니다!

```
어떻게 상대를 찾고,

어떻게 상대에게 이야기를 시작하고,

어떠한 언어로 이야기를 하며,

어떻게 이야기를 종료할까?
```

이렇게 서로 다른 하드웨어와 운영체제 등을 가지고 서로 통신을 하기 위해서는 모든 요소에 규칙이 필요하다는 것입니다. 

이런 규칙을 프로토콜이라고 부릅니다.

<br/>

### 프로토콜에는 여러 가지가 있다!

```
케이블 규격,

IP 주소 지정 방법,

떨어진 상대를 찾기 위한 방법,

그 곳에 도달하는 순서,

웹을 표시하기 위한 순서
```

이렇게 인터넷과 관련된 프로토콜들을 모은 것을 TCP/IP 라고 부르는 것입니다.

<br/><br/>

## 계층으로 관리하는 TCP/IP

TCP/IP는 ‘애플리케이션 계층’, ‘트랜스포트 계층’, ‘네트워크 계층’, ‘링크 계층’ 이렇게 4계층으로 나뉘어 있습니다.

<br/>

### 왜 이렇게 나눈 거야?

메리트가 있기 때문입니다.

<br/>

### 예를 들어서, 

```
인터넷이 하나의 프로토콜로 되어 있다면 어디선가 사양이 변경되었을 때 전체를 바꿔야 되지만,
계층화 되어 있다면 사양이 변경된 해당 계층만 바꾸면 되기 때문입니다.
```

<br/>

### 또한, 계층화 하면 설계를 편하게 할 수 있다.

애플리케이션 층에서 애플리케이션은 자기 자신이 담당하는 부분만 고려하면 되고,

상대가 어디에 있는지, 어떠한 루트로 메시지를 전달하는지, 전달한 메시지가 확실하게 전달되고 있는지 
같은 

고려를 하지 않아도 된다는 것이다.

<br/><br/>

## 애플리케이션 계층

애플리케이션 계층은 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정하고 있습니다.

예를 들면, FTP랑 DNS 등도 애플리케이션의 한 가지 입니다. (FTP, DNS는 뒤에 설명)

HTTP도 이 계층에 포함 된다.

<br/><br/>

## 트랜스포트 계층

트랜스포트 계층은 애플리케이션 계층에 네트워크로 접속 되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공합니다. 

트랜스포트 계층에서는 서로 다른 성질을 가진 TCP와 UDP 두 가지 프로토콜이 있습니다.

<br/><br/>

## 네트워크 계층(=인터넷 계층)

네트워크 계층은 네트워크 상에서 패킷의 이동을 다룬다.

(여기서 패킷이란? 전송하는 데이터의 최소 단위)

네트워크 계층에서 어떠한 경로를 거쳐 상대의 컴퓨터까지 패킷을 보낼지를 결정하기도 한다.

인터넷의 경우라면 상대 컴퓨터에 도달하는 동안에 여러 대의 컴퓨터랑 네트워크 기기를 거쳐서 상대방에게 배송된다. 

여러 가지 선택지 중에서 하나의 길을 결정하는 것이 네트워크 계층의 역할이다.

<br/><br/>

## 링크 계층(=데이터 링크 계층, =네트워크 인터페이스 계층)

네트워크에 접속하는 하드웨어적인 면을 다룹니다

운영체제가 하드웨어를 제어하기 때문에 디바이스 드라이버랑 네트워크 인터페이스 카드(NIC)를 포함 한다. 

그리고 케이블 등과 같이 물리적으로 보이는 부분도 포함한다.

즉, 하드웨어적 측면은 모두 링크 계층의 역할이다.

<br/><br/>

## TCP/IP로 통신을 할때 흐름

TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 한다.

송신하는 측은 애플리케이션 계층부터 내려가고, 수신하는 측은 링크 계층부터 올라간다.

<br/>

### HTTP를 예로 들어보자면,

```
1. 송신측 클라이언트의 애플리케이션 계층에서 어느 "웹 페이지를 보고 싶다"라는 
   HTTP 리퀘스트를 지시한다

2. 트랜스포트 계층에서는 애플리케이션 계층에서 받은 데이터를 통신하기 쉽게 조각내어 
   안내 번호와 포트 번호를 붙여 네트워크 계층에 전달한다.

3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달한다.
```

이렇게 한다면 네트워크를 통해 송신할 준비가 끝난 것이다.

수신측 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의 계층에 전달하여 애플리케이션 계층까지 도달합니다. 

<br/>

애플리케이션 계층에 도달하게 되면 드디어 클라이언트가 발신했던 HTTP 리퀘스트 내용을 수신할 수 있는 것입니다.

각 계층을 거칠때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가한다.

<br/>

반대로 수신측에서는 각 계층을 거칠 때마다 반드시 해당 계층마다 사용한 헤더를 삭제합니다.

이렇게 정보를 감싸는 것을 캡슙화 라고 한다.

<br/><br/>

## HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS 이다.

### 배송을 담당하는 IP

IP는 계층으로 말하자면 네트워크 층에 해당된다.

‘IP’와 ‘IP 주소’ 를 혼동하는 사람이 있는데 ‘IP’ 는 프로토콜의 명칭입니다.

<br/>

IP의 역할은 개개의 패킷을 상대방에게 전달하는 것이고, 

상대방에게 전달하기 까지 여러 가지 요소가 필요한 것입니다. 


그중에서도 IP 주소와 MAC 주소라는 것이 중요합니다.

<br/>

IP주소는 각 노드에 부여된 주소를 가리키는 것이고,

MAC 주소는 각 네트워크 카드에 할당된 고유의 주소를 말합니다.

IP주소는 변경 가능하지만, MAC주소는 변경할 수 없습니다.

<br/>

IP 통신은 MAC 주소에 의존해서 통신을 하는 것입니다.

인터넷에서 통신 상대가 같은 랜선 내에 있을 경우는 
드물어서 

여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방에게 도착합니다.

그렇게 중계하는 동안에는 다음으로 중계할 곳의 MAC주소를 사용하여 목적지를 찾아가는 것입니다. 

<br/>

이때, ARP이라는 프로토콜이 사용됩니다.



ARP는 주소를 해결하기 위한 프로토콜 중 하나이므로, 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있는 것입니다.

<br/><br/>

## 그 누구도 인터넷 전체를 파악하고 있지는 않다

목적지까지 중계할때 컴퓨터와 라우터 등의 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만 알고 있습니다.

<br/>

이 시스템을 라우팅이라고 부르는데, 택배 배송과 흡사합니다

```
화물을 보내는 사람은 택배 집주소 등에 택배를 보낼 수 있는 것만 알고 있으며,

배달원은 화물을 보내는 곳을 보고 어느 지역의 우체국(?)에 보내면 되는지만 알고 있으면 된다.

그리고 우체국(?)은 목적지인 집주소를 보고 어느 집에 배달하면 되는지만 알고 있습니다.
```

결국, 어떤 컴퓨터나 네트워크 기기도 인터넷 전체를 상세하게 파악하고 있지 못하다는 것입니다.

<br/><br/>

## 신뢰성을 담당하는 TCP

TCP는 계층으로 말하자면 트랜스포트 층에 해당하는데, 신뢰성 있는 바이트 스트림 서비스를 제공한다.

<br/>

### 바이트 스트림 서비스란?

용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 

신뢰성 있는 서비스는 상대방에게 보내느 서비스를 의미한다.

<br/>

결국 TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고, 

정확하게 도착 했는지 확인하는 역할을 담당하고 있습니다.

<br/><br/>

## 3way handshaking

상대에게 확실하게 데이터를 보내기 위해서 TCP는 “쓰리웨이 핸드셰이킹” 이라는 방법을 사용합니다.

이 방법은 패킷을 보내고 나서 바로 끝내는 것이 아니라, 보내졌는지 여부를 상대에게 확인하는 것입니다.

<br/>

이것은 ‘SYN’와 ‘ACK’ 라는 TCP 플래그를 사용합니다.

송신측에서는 최초 ‘SYN’ 플래그로 상대에게 접속함과 동시에 패킷을 보내고, 

수신측에서는 ‘SYN/ACK’ 플래그로 송신측에 접속함과 동시에 패킷을 수신한 사실을 전합니다.

<br/>

마지막으로 송신측이 ‘ACK’ 플래그를 보내 패킷 교환이 완료되었음을 전합니다.

이과정에서 어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 순으로 패킷을 재전송합니다.

<br/><br/>

## 이름 해결을 담당하는 DNS

DNS는 HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공한다.

<br/>

### 무슨말인가?

컴퓨터는 IP 주소와는 별도로 호스트 이름과 도메인 이름을 붙일 수 있습니다.

예를 들어, “www.mingseok.kr” 과 같이 적혀 있습니다

주로 사용자는 IP 주소 대신 이름을 이용하여 상대의 컴퓨터를 지정합니다.

<br/>

숫자를 나열하는 IP주소를 지정하는 것보다 영어로 표기해 컴퓨터의 이름을 지정하는 것이 인간에게 친숙합니다. 

그러나 컴퓨터에게는 반대입니다.

<br/>

이 문제를 해결하기 위해 DNS가 있습니다.

DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP주소로부터 도메인명을 조사하는 서비스를 제공하고 있습니다.

<br/><br/>

## URI와 URL

웹 브라우저 등으로 웹 페이지를 표시하기 위해 입력하는 주소가 바로 URL 이다.

```
https://www.naver.com/
```

<br/>

## URI(Uniform Resource Identifier) : 리소스를 식별하는 통일된 방법.


### Uniform?

통일된 서식을 결정하는 것으로, 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 한다.

<br/>

### Resource?

URL로 식별할 수 있는 모든 것을 자원이라고 한다. 

웹 브라우저에 있는 HTML 파일 같은 것만 자원을 뜻하는게 아니고, 

실시간 교통정보 라던가, 우리가 구분할 수 있는 모든 것을 리소스라고 하는 것이다.

<br/>

### Identifier?

식별 가능한 것을 참조하는 오브젝트이며 식별자라고 부른다.

<br/>

### 결국 

URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자.

스키마는 리소스를 얻기 위한 수단에 이름을 붙이는 방법이다.

<br/>

HTTP의 경우에는 밑에 처럼 'http'를 사용하는 것이다.

```
https:
```


<br/><br/>



![이미지](/programming/img/그림1.PNG)

<br/>

### URN은 “이런게 있구나..” 만 생각하자

![이미지](/programming/img/그림2.PNG)

<br/><br/>

## URL 전체 문법

- scheme://[userinfo@]host[:port][/path][?query][#fragment]
- https://www.google.com:443/search?q=hello&hl=ko
    - 프로토콜(https)
    - 호스트명(www.google.com)
        - 도메인명 또는 IP 주소를 직접 사용가능
    - 포트 번호(443)
        - 접속 포트, 일반적으로 생략, 생략시 http는 80, http는 443
    - 패스(/search)
        - 리소스 경로(path), 계층적 구조
        - 예) /home/file1.jpg
        - /members
    - 쿼리 파라미터(q=hello&hl=ko)
        - key=value 형태
        - ?로 시작, &로 추가 기능 ?keyA=valueA&keyB=valueB
        - ‘쿼리 파라미터’, ‘쿼리 스트링’ 으로 불린다.
