# ğŸ ë¹µ ë¶€ìŠ¤ëŸ¬ê¸°
>ê°œë°œ ê´€ë ¨ í•™ìŠµ ì¤‘ í•˜ë‚˜ì˜ ê¸€ë¡œ ì‘ì„±í•˜ê¸°ì—” ì§§ê³ , <br/>
>ë²„ë¦¬ê¸°ì—” ì•„ê¹Œìš´ ë¶€ìŠ¤ëŸ¬ê¸° ì •ë³´ë“¤ì„ ëª¨ì•„ë‘ëŠ” ê³³. <br/> <br/>
>ì„ì‹œë¡œ ì‘ì„±í•œê²Œ ì™„ì„± ë˜ë©´ ë¹µì´ ë˜ì–´ ë‚˜ê°€ëŠ” ê²ƒì´ë‹¤. <br/> 
>1ê°œ, 2ê°œ, 3ê°œ, ... ë¶€ìŠ¤ëŸ¬ê¸° ë“¤ì„ ëª¨ì•„ ë‘ê³  ì ì  ì •ë¦¬í•´ ê°€ëŠ” ê²ƒì´ë‹¤. <br/>
>ì •ë¦¬ê°€ ëœê²ƒì€ ğŸì´ ë˜ì–´ í•´ê²°.
> ***



<br/>

## ëª©ì°¨


---


@Validated ì„¤ëª…
@ModelAttribute Item ì— ëŒ€í•´ì„œ ìë™ìœ¼ë¡œ ê²€ì¦ê¸°ê°€ ìˆ˜í–‰ì´ ë˜ëŠ” ê²ƒì´ë‹¤.

ê·¸ë¦¬ê³  ê²€ì¦ì„ ëë‚´ê³  ë¬¸ì œê°€ ìˆë‹¤ë©´ â†’ BindingResult bindingResult ì— ë‹´ê¸°ëŠ” ê²ƒì´ë‹¤.


ì´ë ‡ê²Œ í•  ìˆ˜ ìˆì—ˆë˜ ì´ìœ ëŠ”,
@InitBinder ë©”ì„œë“œ ë‚´ë¶€ë¡œì§ì— ê²€ì¦ê¸°ê°€ ìˆê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

@ValidatedëŠ” ê²€ì¦ ëŒ€ìƒ ì•ì— ë¶™ì–´ì•¼ ëœë‹¤.

@ValidatedëŠ” "ê²€ì¦ê¸°ë¥¼ ì‹¤í–‰í•˜ë¼" ë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.

@Validatedì™€ @Valid ëŠ” ë™ì¼í•˜ë‹¤. (ë‘˜ë‹¤ ì‚¬ìš©í•´ë„ ëœë‹¤.)

@Slf4j
@Controller
public class ValidationItemControllerV2 {

		// ... ìƒëµ

    @PostMapping("/add")
    public String addItemV6(@Validated @ModelAttribute Item item, 
                                       BindingResult bindingResult, 
                                       RedirectAttributes redirectAttributes) {

        if (bindingResult.hasErrors()) {
            log.info("errors={}", bindingResult);
            return "validation/v2/addForm";
        }
    }

    // ... ìƒëµ
}
ì¶”ê°€ë¡œ @Validated ì™€ BindingResult bindingResultëŠ” ì„¸íŠ¸ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.




Bean Validation ì˜ì¡´ê´€ê³„ ì¶”ê°€
build.gradle íŒŒì¼

implementation 'org.springframework.boot:spring-boot-starter-validation'



ê²€ì¦ ì• ë…¸í…Œì´ì…˜ê³¼ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ìŒì´ë‹¤.
@NotBlank : nullì´ë©´ ì•ˆë˜ê³ , ë¹ˆ ë¬¸ìì´ë©´ ì•ˆë˜ê³ , ê³µë°± ìˆìœ¼ë©´ ì•ˆë˜ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.

@NotNull : nullì´ë©´ ì•ˆëœë‹¤.

@Range(min = 1000, max = 1000000) : ë²”ìœ„ê°€ ìµœì†Œ 1000ë¶€í„° ~ 1000000 ê¹Œì§€ì´ë‹¤.

@Max(9999) : ìˆ˜ëŸ‰ì€ 9999ê¹Œì§€ ì´ë‹¤.




ì‚¬ìš© ì˜ˆì œ
@Data
public class Item {

    private Long id;

    @NotBlank // @NotBlank(message = "ê³µë°±X") ì´ë ‡ê²Œ ë©”ì‹œì§€ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
    private String itemName;

    @NotNull
    @Range(min = 1000, max = 1000000)
    private Integer price;

    @NotNull
    @Max(9999)
    private Integer quantity;

    public Item() {
    }

    public Item(String itemName, Integer price, Integer quantity) {
        this.itemName = itemName;
        this.price = price;
        this.quantity = quantity;
    }
}



ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œì§ (ê·¸ëƒ¥ ì°¸ê³ )
@Slf4j
@Controller
public class ValidationItemController {

    // ... ìƒëµ

    @PostMapping("/add")
    public String addItem(@Validated @ModelAttribute Item item, 
                                     BindingResult bindingResult, ...) {

        if (bindingResult.hasErrors()) {
            log.info("errors={}", bindingResult);
            return "validation/v3/addForm";
        }

        //ì„±ê³µ ë¡œì§
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status", true);
        return "redirect:/validation/v3/items/{itemId}";
    }

    // ... ìƒëµ
}



ê²€ì¦ ìˆœì„œ
@ModelAttribute Item item ê°€ ë¦¬í€˜ìŠ¤íŠ¸ íŒŒë¼ë¯¸í„°ë¥¼ Itemí´ë˜ìŠ¤ì— ë§¡ê²Œ ë°ì´í„°ë¥¼ ë„£ì–´ì¤€ë‹¤.

itemName, price, quantity ë³€ìˆ˜ ë“¤ì„ ë§í•œë‹¤.
ë‹¤ìŒìœ¼ë¡œ ì„±ê³µí•˜ë©´, Validatorë¡œ ì ìš©í•œë‹¤.

(ì°¸ê³  : ë°”ì¸ë”©ì— ì„±ê³µí•œ í•„ë“œë§Œ Bean Validationì„ ì ìš©í•œë‹¤.)
2-1. ë§Œì•½, @ModelAttribute ë°ì´í„° ë°”ì¸ë”©ì— ì‹¤íŒ¨í•œë‹¤ë©´ typeMismatchë¡œ FieldErrorì— ì¶”ê°€ í•œë‹¤.

- (ë°”ì¸ë”©ì— ì‹¤íŒ¨ ì˜ˆì‹œëŠ” â†’ ê°€ê²©ì—ëŠ” intë§Œ ë„£ì–´ì•¼ ë˜ëŠ”ë°, String ë„£ëŠ” ê²½ìš°ë“¤)
