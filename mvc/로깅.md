## 로깅 간단히 알아보기

### hello.springmvc 패키지부터 그 하위 로그 레벨 설정

<br/>로그 선언 방법 2가지 방법이 있지만,

로그 선언 방식이 귀찮으면 `@Slf4j` 어너테이션 사용하자.

```java
private Logger log = LoggerFactory.getLogger(getClass());
private static final Logger log = LoggerFactory.getLogger(Xxx.class)
```

<br/>

## 매핑 정보 `@RestController` 란?

`@Controller` 는 반환 값이 String 이면 뷰 이름으로 인식된다. 

그래서 뷰를 찾고 뷰가 랜더링 된다.

<br/>

`@RestController` 는 반환 값으로 뷰를 찾는 것이 아니라, HTTP 메시지 바디에 바로 입력한다.

따라서 실행 결과로 ok 메세지를 받을 수 있다. 

<br/>

`LogTestController` 클래스 
생성해주기.

```java
package hello.springmvc.basic;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class LogTestController {

    //slf4j꺼 사용하기
    private final Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";

        System.out.println("name = " + name);
        log.info(" info log={}", name);

        return "ok";
    }
}
```

1. 자동완성 할때 `slf4j` 이걸 사용하자.

2. 그리고 콘솔창을 보면 sout 한 것이랑 다르다. 

<br/>

`log.info(" info log={}", name);` 이건 밑 콘솔 처럼 나온다.

![이미지](/programming/img/서40.PNG)

### 시간, 로그 레벨, 프로세스 ID, 쓰레드 명, 클래스명, 로그 메시지

INFO : 로그 레벨

12528 : 프로세스 ID.

[nio-8080-exec-2] : 현재 실행한 쓰레드.

hello.springmvc.basic.LogTestController : 현재 나의 클래스

info log=Spring : 메세지 출력.

<br/>

## 위 코드에서 추가 작성한 것이다.

`@Slf4j` 어너테이션을 사용한 것이다. 

<br/>그리고 주석 잘보기.

```java
package hello.springmvc.basic;

import lombok.extern.slf4j.Slf4j;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@Slf4j
@RestController
public class LogTestController {

    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";

        System.out.println("name = " + name); // 이렇게 사용하면 안되다.
        // log.trace("trace log= " + name)' 이렇게 사용해도  안된다.

        log.trace("trace log={}", name); // 로그를 찍을때, 레벨을 정할수 있다. "이 로그는 어떤 상태의 레벨이다"
                                         // 예를 들면,
                                         // "debug 현재 로그는 디버그 할때 보는 것이다, 개발서버에서 보는거야"
                                         // "info 현재 로그는 중요한 정보야, 비즈니스 정보야, 우리가 꼭 운영시스템
                                         // 에서 봐야 될 정보야"
                                         // "warn 현재 로그는 경고, 위험한거야"
                                         // "error 현재 로그는 에러야, 빨리 확인해야 돼."

        log.debug("debug log={}", name);
        log.info(" info log={}", name);
        log.warn(" warn log={}", name);
        log.error("error log={}", name);
        return "ok";
    }

}
```

<br/>

실행 시켜보면 info, warn, error 만 출력 되는 걸 알 수 있다.

![이미지](/programming/img/서41.PNG)

<br/>

“나머지 두개는 어디갔나?” 싶으면 

`resources` → http://application.properties 파일 클릭하여 작성하고 실행시켜 보면

<br/>즉, 이건 “난 로그 다 볼거야” 할때 사용 하는 것이다.

```java
#hello.springmvc 패키지와 그 하위 로그 레벨 설정
logging.level.hello.springmvc=trace
```

<br/>이렇게 모든 출력을 다 볼 수 있다.

![이미지](/programming/img/서42.PNG)

<br/>

### 혹시라도 디버그 부터 보고 싶다고 한다면

이렇게 작성 후 실행 시켜 보면

```java
#hello.springmvc 패키지와 그 하위 로그 레벨 설정
logging.level.hello.springmvc=debug
```

<br/>이렇게 디버그 부터 출력 되는 걸 알 수 있고, 내려 갈수록 심각도가 높은것이다.

trace < debug < info < warn < error 순이다. error 가 레벨이 제일 높다.

개발 서버는 debug 출력

운영 서버는 info 출력

![이미지](/programming/img/서43.PNG)

<br/>그리고 [`application.properties`](http://application.properties) 에 설정을 `info` 부터 한다면 여러 로그가 남아 있어도 

`trace, debug` 는 안찍는 것이다. info부터 시작하여, warn, error 만 출력 되는 것이다.

<br/>

>**Reference** <br/>스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술 - https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1