## IoC, DI, DIP 다 같은거 아닌가?



이번 기회로 알게 되었다.

IoC(Inversion of Control), DIP, DI 는 모두 다른 개념이다.

<br/><br/>

## IoC (=제어의 역전, =DI 컨테이너)

`제어권`이 사용자에게 있지 않고, `프레임워크`에 있습니다.

스프링에서는 인스턴스의 `생성`부터 `소멸`까지
개발자가 아닌 컨테이너에서 대신 `관리`하게 된다.

<br/>

`IoC`란 코드의 흐름을 제어하는 주체가 바뀌는 것이다.

- 객체를 생성하는 것

- 객체의 생명주기를 관리하는 것 등.

<br/>

```java
"내가 뭔가를 호출하는 것이 아닌, 프레임워크 같은것이 대신 호출해 주는 것이다"
```

`IoC`를 적용한다는 것은 이러한 흐름 제어를 또 다른 제 3자가 수행한다는 것을 의미한다.

<br/>

### 기준은 뭘까?

라이브러리는 내 코드가 `라이브러리`를 이용한다. → 즉, 제어권이 내 코드에 있다. 

반면, 프레임워크는 프레임워크가 나의 코드를 실행한다. 

- 즉, 제어권은 프레임워크에 있다.

<br/><br/>

## DIP (=의존관계 역전 법칙)

`SOLID` 원칙 중 하나이다. 

`DIP`가 주장하는 바의 핵심은 `추상화`에 의존하라는 것이다

```java
프로그래머는 "추상화에 의존해야지, 구체화에 의존하면 안된다."
```

클라이언트 코드가 `구현 클래스`를 보지 말고, `인터페이스`만 바라보라는 뜻이다.

<br/>

### 예시)

운전자는 자동차의 `‘역할’`에 대해서만 알아야지,

아반떼에 대해서만, 디테일하게 알고 있다면 잘못된 것이다.

`역할`과 `구현`을 철저하게 분리하도록 시스템을 설계해야 하는 것이다.

- 다시 말해, 시스템도 언제든지 갈아 끼울 수 있도록 말이다.

<br/><br/>

## DI (=의존성 주입)

`DI`는 필요로 하는 객체를 스스로 생성하는 것이 아닌, 

외부로 부터 주입받는 기법을 의미한다. 

```java
마틴 파울러의 글에 따르면 3가지 타입으로 정의할 수 있다.
-> 그 중 "Constructor Injection" 방식을 스프링에서도 권장한다.
```

<br/>

### 장점

객체간의 의존관계를 미리 설정해두면,
스프링 컨테이너가 의존관계를 자동으로 연결해준다.

이렇게 되면, 직접 의존하는 객체를 `생성`하거나 `검색`해서 
가져올 필요 없기에, `결합도`가 낮아지는 장점이 있다.

<br/>

### `DI`는 `IoC`개념이 적용된 결과물 중 하나이다.

의존성을 주입한다는 것을 `IoC` 적인 행위로 바라볼 수 는 있지만, 

`IoC`가 곧 의존성 주입이라고 보기는 어렵기 때문이다.

<br/>

### 스프링 DI

‘기존 코드를 전혀 손대지 않고, 설정만으로 구현 클래스를 변경’ 할 수 있다.

- 뭔가 밖에서 넣어주는 기분이 들것이다. → `“누가?”` 스프링이 넣어 주는 것.