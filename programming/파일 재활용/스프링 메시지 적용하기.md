## 스프링 메시지 적용하기


상품명이라는 단어를 모두 상품이름으로 고쳐야 된다면 어떻게 해야할까? -> 노가다?

HTML 여러 화면에 보이는 상품명, 가격, 수량 등, label 에 있는 단어를 변경하려면 

다음 화면들을 다 찾아가면서 모두 변경해야 한다.


<br/><br/>


## messages.properties

메시지 관리용 파일을 만들고 불러다 쓰자.
'=' 을 기준으로 키, 벨류 형태로 사용하는 것이다.

```
item=상품
item.id=상품 ID
item.itemName=상품명
item.price=가격
item.quantity=수량
```

각 HTML들은 다음과 같이 해당 데이터를 key 값으로 불러서 사용하는 것이다.

한파일만 수정해준다면, 같은 부분의 모든 파일을 변경할 수 있게 되는 것이다.

이런 방법을 메시지를 관리한다고 표현한다.


<br/><br/>



## 메시지 소스 설정

`messages.properties` 파일에서 작성하기.

```
spring.messages.basename=messages,config.i18n.messages
```

<br/>

### 디폴트 같은 경우는 이렇다.

```
spring.messages.basename=messages // 이것도 생략되어 있음
```

설정하지 않는다면 messages 하나만 읽어 드리는 것이다.

<br/><br/>

## 파일 만들기 -> `messages.properties`

resources 파일을 선택하여 만들어야 된다.

![이미지](/programming/img/입문61.PNG)

<br/><br/>

## 이렇게 설정하여 불러와 사용하면 되는 것이다.

```
hello=안녕
hello.name=안녕 {0}
```

`{0}` 같은 경우는 값을 변경(치환) 하도록 하는 것이다.

- 즉, "안녕 Spring" 이 출력 된다면 -> '안녕'은 기존 설명한 것이며,

    - {0} 은 'Spring'으로 치환 되는 것이다.

<br/><br/>

## 추가로 인코딩 설정을 해야 된다.

그리고 인텔리를 재부팅하면 기존에 설정하였던 것들이 ‘?’ 로 변경되어 있을 것이다 -> 그러면 입력값 다시 작성하기.

![이미지](/programming/img/입문62.PNG)

<br/><br/>

## `messages.properties` 작성하기

label이라고 앞에 붙인 이유는 다른것과 구분하기 위해 지정한 것이다.

```
label.item=상품
label.item.id=상품 ID
label.item.itemName=상품명
label.item.price=가격
label.item.quantity=수량

page.items=상품 목록
page.item=상품 상세
page.addItem=상품 등록
page.updateItem=상품 수정

button.save=저장
button.cancel=취소

```

<br/><br/>

## 타임리프 메시지 적용

타임리프의 메시지 표현식 `#{...}` 를 사용 한다.

예를 들어서 방금 등록한 상품이라는 이름을 조회하려면 `#{label.item}` 이라고 하면 된다.

<br/>

### 렌더링 전

```
<div th:text="#{label.item}"></h2>
```

### 렌더링 후

```
<div>상품</h2>
```

<br/><br/>

## HTML 사용 예제

```html
<div class="py-5 text-center">
   <h2 th:text="#{page.addItem}">상품 등록 폼</h2>
</div>

<form action="item.html" th:action th:object="${item}" method="post">

	   // ... 생략
```

<br/><br/>

## 만약,

label.item=상품 -> label.item=상품12341234 으로 변경한다면?

<br/>

### 변경 전

![이미지](/programming/img/입문63.PNG)

<br/><br/>

### messages.properties 파일 해당 부분 수정

```java
//... 생략

page.addItem=상품 등록12341234
```

<br/>

### `th:text="#{page.addItem}` 작성하여 출력 잘되는지 확인

```html
<div class="py-5 text-center">
   <h2 th:text="#{page.addItem}">상품 등록</h2>
</div>

<form action="item.html" th:action th:object="${item}" method="post">
		
	   // ... 생략
```

<br/><br/>

### 출력값 (변경 후)

![이미지](/programming/img/입문64.PNG)


<br/><br/>

## 전체 메시지 적용한 코드

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
 <meta charset="utf-8">
 <link th:href="@{/css/bootstrap.min.css}"
 href="../css/bootstrap.min.css" rel="stylesheet">
 <style>
 .container {
 max-width: 560px;
 }
 </style>
</head>

<body>
<div class="container">
 <div class="py-5 text-center">
	  <h2 th:text="#{page.addItem}">상품 등록</h2>
 </div>
    <h4 class="mb-3">상품 입력</h4>
    <form action="item.html" th:action th:object="${item}" method="post">
       <div>
       <label for="itemName" th:text="#{label.item.itemName}">상품명</label>
       <input type="text" id="itemName" th:field="*{itemName}" class="form-control"
		          placeholder="이름을 입력하세요">
       </div>

       <div>
       <label for="price" th:text="#{label.item.price}">가격</label>
       <input type="text" id="price" th:field="*{price}" class="formcontrol" placeholder="가격을 입력하세요">
       </div>

       <div>
       <label for="quantity" th:text="#{label.item.quantity}">수량</label>
       <input type="text" id="quantity" th:field="*{quantity}" class="form-control"
	               placeholder="수량을 입력하세요">
       </div>

       <hr class="my-4">
       <div class="row">
       <div class="col">
          <button class="w-100 btn btn-primary btn-lg" type="submit"
	          th:text="#{button.save}">저장</button>
       </div>

       <div class="col">
       <button class="w-100 btn btn-secondary btn-lg" onclick="location.href='items.html'"
	   		    th:onclick="|location.href='@{/message/items}'|" type="button"
                            th:text="#{button.cancel}">취소</button>
       </div>
       </div>
    </form>
</div><!-- /container --></body>
</html>

```

<br/><br/>

## 노란색 부분들을 수정 하는 것이다.

![이미지](/programming/img/겨27.PNG)


<br/><br/>

>**Reference** <br/>[스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1)