## 핸들러 어댑터란?

만약 어떤 개발자는 ControllerV3 방식으로 개발하고 싶고, 어떤 개발자는 

ControllerV4 방식으로 개발하고 싶다면 어떻게 해야 할까??

![이미지](/programming/img/서37.PNG)


<br/>

## 어댑터 패턴

ControllerV3 , ControllerV4 는 완전히 다른 인터페이스이다. 

따라서 호환이 불가능하다.

<br/>

### 마치 v3는 110v이고, v4는 220v 전기 콘센트 같은 것이다.

이럴 때 사용하는 것이 바로 어댑터이다.

<br/>어댑터 패턴을 사용해서 프론트 컨트롤러가 다양한 방식의 컨트롤러를 처리할 수 있도록 변경해보자.

![이미지](/programming/img/서38.PNG)

<br/>

## 핸들러

‘컨트롤러’ 의 이름을 더 넓은 범위인 ‘핸들러’ 로 변경했다. 즉, ‘컨트롤러’ 이다.

그 이유는 이제 어댑터가 있기 때문에 꼭 컨트롤러의 개념 뿐만 아니라 

어떠한 것이든 해당하는 종류의 어댑터만 있으면 다 처리할 수 있기 때문이다.

<br/>

## 핸들러 어댑터

(핸들러를 처리해 주는 어댑터라고 해서 ‘핸들러 어댑터’ 이다)

중간에 어댑터 역할을 하는 어댑터가 추가되었는데, 이름이 핸들러 어댑터이다. 

여기서 어댑터 역할을 해주는 덕분에 다양한 종류의 컨트롤러를 호출할 수 있다.

<br/>

## 핸들러 어댑터 목록 (그림 2번)

어댑터를 찾아 오는 것이다. 110v용 어댑터,  220v용 어댑터 

즉, 컨트롤러 v3를 처리 할 수 있는 어댑터, 컨트롤러 v4를 처리 할 수 있는 

어댑터를 찾아 오는 것이다.

<br/>

### (그림 3번)

예전에는 `Front controller` 에서 바로 `핸들러`로 호출 하였다.

하지만 이제는 그렇게 안된다.

이제는 어댑터를 통해서 호출 해야 되는 것이다 !!

<br/>우리도 생각해보면 110v 볼트 전기가 들어 오면, 220v 볼트로 변환하는 걸 끼워서 쓰는 것처럼 

Front controller 도 이제 해당 컨트롤러를 자기가 직접 호출 할 수 있는 것이 아니고 !!!!

‘핸들러 어댑터’ 를 통해서 호출을 해야 하는 것이다.

<br/>어댑터한테 핸들러를 넘겨 준다.

![이미지](/programming/img/서39.PNG)

그러면 ‘컨트롤러’ 가 지가 대신 다른 걸 호출 해주는 것이다.

그러면 ‘핸들러 어댑터’ 가 ‘핸들러’ 를 호출해서 결과를 받은 다음에 ‘핸들러 어댑터’ 가 

ModelView를 프론트 컨트롤러에게 반환 해주는 것이다.  반환값은 뭐다? `"new-form”`

<br/>

## 전체적인 흐름은 이렇다.

110v 볼트와 220v 볼트가 있어서 사용 해야 되는데`(그림 1번 - 핸들러 조회)`, 꽂으려면 일단,

“110v 볼트용이 맞아?”, “220v 볼트용이 맞아?” 맞는 `어댑터`를 찾아야 되는 것이다. 

`(그림 2번 - 핸들러 어댑터 조회)` 그리하여 맞는 `어댑터`를 꺼내는 것이다.

<br/>

그런 뒤, 꺼낸 것을 호출 한다. 

실제 110v볼트 이든, 220v볼트 이든 거기에 맞는 `핸들러(컨트롤러)`를 넘겨주면 준다`(3번)`, 

이제는 이 `‘핸들러 어댑터’` 가  `‘핸들러(컨트롤러)’(4번)`를 호출해 주는 것이다.

<br/>

그리고 핸들러에서 "new-form” 를 핸들러 어댑터한테 반환하고, <br/>핸들러 어댑터는 프론트 컨트롤러한테 반환하는 것이다.



<br/>만약, 핸들러 매핑 정보를 조회 해보니, 

컨트롤러가 v3이다. 그러면 v3를 처리 할 수 있는 ‘핸들러 어댑터 목록’ 에서 

꺼내야 하는 것이다. 그때 사용 하는 것이 밑에 이 코드이다.

```java
boolean supports(Object handler);
```

<br/>

### 그림 3~5번 쪽을 보면 ‘프론트 컨트롤러’ 입장에서는 ‘핸들러 어댑터’ 만 의존하고 있기 때문에, <br/>구현 클래스 중 어느 것이 들어와도 상관 없는 것이다.


<br/>

>**Reference** <br/>스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술 - https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1