## 빈 스코프, request 스코프

- 스코프는 번역 그대로 빈이 존재할 수 있는 범위를 뜻한다.
- 지금까지 우리는 스프링 빈이 스프링 컨테이너의 시작과 함께 생성되어서 스프링 컨테이너가
    
    종료될 때 까지 유지된다고 학습했다. 
    
- 이것은 스프링 빈이 기본적으로 싱글톤 스코프로 생성되기 때문이다.

<br/>

## 스프링은 다음과 같은 다양한 스코프를 지원한다.

<br/>

### 싱글톤 스코프

기본 스코프, 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프이다. 

즉, 컨테이너의 시작과 끝을 함께 하는 가장 긴 스코프.

<br/>

### 프로토타입 스코프

스프링 컨테이너는 프로토타입 빈의 생성과 의존관계 주입까지만 관여하고 더는 관리하지 않는 매우 짧은 범위의 스코프이다.

즉, 스프링 컨테이너가 빈을 만들어어서는 준다. 그리고 의존관계 주입 까지도 해주고, 초기화 메서드까지는 불러준다.

그 이후에는 클라이언트에게 반환 해주고 더이상  관리 하지 않는 것이다.

<br/>

### 정리

싱글톤은 스프링 컨테이너의 시작과 끝까지 함께하는 매우 긴 스코프이고, 

프로토타입은 생성과 의존관계 주입, 그리고 초기화까지만 진행하는 특별한 스코프이다.

<br/><br/>

## 웹 관련 스코프

### 웹 스코프의 특징

- 웹 스코프는 웹 환경에서만 동작한다.
- 웹 스코프는 프로토타입과 다르게 스프링이 해당 스코프의 종료시점까지 관리한다. <br/>따라서 종료 메서드가 호출된다.
    


## request

웹 요청이 들어오고 나갈때 까지 유지되는 스코프이다. <br/>즉, 고객의 요청이 와서, 쭉 ~~ 돌고 고객의 요청이 나갈때 까지 이다. <br/>또 다른 설명으론, 고객의 요청이 들어올 때 생성이 되서 고객의 요청이 나갈 때 destroy 가 되는 것이다. <br/>(요청마다 각각 따로 호출 되는 것이다)

<br/>

다르게는 HTTP 요청 하나가 들어오고 나갈 때 까지 유지되는 스코프, 각각의 HTTP 요청마다 <br/>별도의 빈인스턴스가 생성되고, 관리된다

<br/>

### request scope란?

만약에 서비스를 만들었는데 장사가 너무 잘되는 것이다!

http 요청이 동시에 여러개가 온다 !! 

로그를 여러개 남길 것이다.

그런데, 그게 막 섞이는 것이다. 즉, 뭔지 잘 구분하기가 힘든 것이다.

그럴때 사용하기 좋은게 request scope 이다.

<br/>이렇게 uuid 를 사용하여 “같은 고객한테서 왔구나, 구분 할 수 있는 것이다”

![이미지](/programming/img/스프링37.PNG)


<br/>

## session 

웹 세션이 생성되고 종료될 때 까지 유지되는 스코프이다 즉, 로그인 부분에서 많이 사용한다.

<br/>

## application 

웹의 서블릿 컨텍스트와 같은 범위로 유지되는 스코프이다

![이미지](/programming/img/스프링36.PNG)


<br/>

>**Reference** <br/>스프링 핵심 원리 - 기본편 : https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8
