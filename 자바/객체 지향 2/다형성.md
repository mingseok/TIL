## 다형성이란?

### 한가지 예제로 설명하면,
운전자와 자동차 종류인 k3, 아반떼, 테슬라 이렇게 3대 차량이 있다.<br/> 운전자는 k3만 타고 다니지만 아반떼도 탈수 있고, 테슬라도 탈수 있다. <br/>즉, 자동차 역할만 한다면 어느것이든 상관이 없다는 뜻이다.

**새로운 자동차가 나와도 클라이언트는 새로운 걸 안 배워도 되는 것이다.**

<br/>

### 또 다른 예제로 본다면
로미오와 줄리엣 공연을 한다고 생각하자.<br/> 그러면 **'로미오 역할'** 을 해야 할 사람들 구해야 되고 **'줄리엣 역할'** 을 해야 될 사람을 구해야 된다. <br/>여기서 포인트는 '로미오와 줄리엣' **역할**은 누구나 해도 상관 없다는 뜻이 된다.

<br/>

예제들을 보면 **'역할과 구현'을 나눈 것이다.**
### 이것이 바로 '유연하고 변경이 용이' 하단 뜻이 된다.

<br/> 

## 역할과 구현을 분리

### 역할과 구현으로 구분하면 세상이 단순해지고, 유연해지며 변경도 편리해진다.

### 장점
- 클라이언트는 대상의 역할(인터페이스)만 알면 된다.
- 클라이이는 구현 대상의 내부 구조를 몰라도 된다.
- 클라이언트는 구현 대상의 내부 구조가 변경되어도 영향을 받지 않는다.
- 클라이언트는 구현 대상 자체를 변경해도 영향을 받지 않는다.

<br/>

### 자바언어 에서는?

- 자바에서는 **'역할'** == 인터페이스, **'구현'** == 인터페이스를 **구현한 클래스**, 구현 객체
- 객체를 설계할 때 역할과 구현을 명확히 분리
- 객체 설계시(인터페이스)을 먼저 부여하고, 그 역할을 수행하는 구현 객체 만들기.

<br/>


‘여러 가지 형태를 가질 수 있는 능력’ 을 의미한다. <br/>자바에서는 한 타입의 참조변수로 여러 타입의 객체를 참조할 수 있도록 함으로써 다형성을 프로그램적으로 구현한다.

<br/>좀 더 구체적으로 말하자면, 조상클래스 타입의 참조변수로 자손클래스의 인스턴스를 참조할 수 있도록 하였다.

<br/>원래는 인스턴스의 타입과 일치하는 타입의 참조변수만을 사용했다. <br/>즉,  Tv인스턴스를 다루기 위해서는 Tv타입의 참조변수를 사용하고, <br/>CaptionTv인스턴스를 다루기 위해서는 Caption타입의 참조변수를 사용했다. 

### <br/>하지만 Tv와  CaptionTv클래스가 서로 상속관계에 있을 경우, 
다음과 같이 조상 클래스 타입의 <br/>참조변수로 자손 클래스의 인스턴스를 참조하도록 하는 것도 가능하다.

```java
Tv t = new CaptionTv(); // 조상 타입의 참조변수로 자손 인스턴스를 참조
```

### <br/>인스턴스를 같은 타입의 참조변수로 참조하는 것과 조상타입의 참조변수로 참조하는 것은 어떤 차이가 있나??

```java
CaptionTv c = new CaptionTv();
Tv t = new CaptionTv();
```

<br/>실제 인스턴스가 CaptionTv 타입이라 할지라도, **참조 변수 t로는 CaptionTv인스턴스의 모든 멤버를 사용할 수 없다.**

<br/>Tv타입의 참조변수로는 **CaptionTv인스턴스 중에서 Tv클래스의 멤버들만 사용할 수 있다.**

<br/>따라서, 생성된 Caption인스턴스의 멤버 중에서 **Tv클래스에 정의 되지 않은 멤버인 text와 caption() 은 참조변수 t로 사용이 불가능하다.** <br/>즉, t.text 또는 t.caption( ) 와 같이 할 수 없다는 것이다. 

<br/>

**둘 다 같은 타입의 인스턴스지만 참조변수의 타입에 따라 사용할 수 있는 멤버의 개수가 달라진다.**

| t 변수에는  | Tv클래스 있는건 다 사용 할 수 있고, CaptionTv 클래스에 있는 text와, caption( ) 을 사용할 수 없다. |
| --- | --- |
| c 변수에는  | Tv클래스 있는건 다 사용 할 수 있으며, CaptionTv 있는 것도 다 사용 할 수 있다. |

<br/>

### 반대로 자손타입의 참조변수로 조상타입의 인스턴스를 참조하는 것은 가능할까?

**가능하지 않다. (에러 발생)**

<br/>이유는, 인스턴스의 Tv의 멤버 개수보다 참조변수 c가 사용할 수 있는 멤버 개수가 더 많기 때문이다.

```java
CaptionTv c = new Tv();
```

<br/>CaptionTv클래스에는 text와 caption( ) 이 정의되어 있으므로 참조변수 c로는 c.text, c.caption( ) 과 <br/>같은 방식으로 c가 참조하고 있는 인스턴스에서  text와 caption( ) 을 사용하려 할 수 있다.

<br/>

### 하지만, c가 참조하고 있는 인스턴스는 Tv타입이고, Tv타입의 인스턴스에는 <br/>text와 caption( ) 이 존재하지 않기 때문에 이들을 사용하려 하면 문제가 발생한다.

<br/>그래서, 자손타입의 참조변수로 조상타입의 인스턴스를 참조하는 것은 존재하지 않는 멤버를 <br/>사용하고자 할 가능성이 있으므로 허용하지 않는 것이다. 

<br/>

**조상타입의 참조변수로 자손타입의 인스턴스(실제 존재하는 만들어 진것)를 참조할 수 있다.**

**반대로 자손타입의 참조변수로 조상타입의 인스턴스를(실제 존재하는 만들어 진것) 참조할 수는 없다.**


<br/><br/>

>**Reference**
><br/>남궁 성 지음, 『자바의 정석』, 도우출판.
