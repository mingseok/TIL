## 플러시란?

영속성 컨텍스트의 변경내용을 데이터베이스에 반영하는 것이다.

즉, 쌓아뒀던 sql 쿼리들을 DB에 날려주는 과정을 말하는 것이다.

```
영속성 컨텍스트의 '변경사항'과 데이터 베이스를 맞추는 작업이라고 생각하자.
```

<br/><br/>

## 플러시 발생

데이터 베이스 트랜잭션이 커밋되면, 자동적으로 플러시가 발생한다고 생각하면 된다.

- 변경 감지

- 수정된 `‘엔티티 쓰기 지연 SQL 저장소’`에 등록
- `‘쓰기 지연 SQL 저장소’`의 쿼리를 데이터베이스에 전송 `(=등록, 수정, 삭제 쿼리)`

```
추가로 플러시를 한다고해서 1차캐시를 지우거나 그러지 않는다.
단지, '쓰기 지연 SQL 저장소'에 있는 업데이트 쿼리들이 쌓이고 
이것들을 데이터 베이스에 반영이 되는 과정이라고 생각하면 된다.
```

<br/><br/>

## 플러시 정리

- 영속성 컨텍스트를 비우지 않음

- 영속성 컨텍스트의 변경내용을 데이터베이스에 동기화
- 트랜잭션이라는 작업 단위가 중요 → 커밋 직전에만 동기화 하면 된다.


<br/><br/>

>**Reference** <br/>[자바 ORM 표준 JPA 프로그래밍 - 기본편](https://www.inflearn.com/course/ORM-JPA-Basic)



