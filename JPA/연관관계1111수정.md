## 스프링 메시지 소스 사용

### 환경 설정

![이미지](/programming/img/겨24.PNG)

<br/>

![이미지](/programming/img/겨25.PNG)

<br/>

그리고 다시 프로그램을 보면 값이 한글에서 “??” 로 변경 되어 있을 것이다. 

이것을 다시 원래대로 “안녕” 을 작성한다.



![이미지](/programming/img/겨26.PNG)

<br/>

## 테스트 코드1

```java
@SpringBootTest
public class MessageSourceTest {

    @Autowired
    MessageSource ms;

    @Test
    void helloMessage() {
        String result = ms.getMessage("hello", null, null);
        Assertions.assertThat(result).isEqualTo("안녕");
    }
}
```

`ms.getMessage("hello", null, null)`

code: hello

args: null

locale: null

가장 단순한 테스트는 메시지 코드로 hello 를 입력하고 나머지 값은 null 을 입력했다.

<br/>locale 정보가 없으면 basename 에서 설정한 기본 이름 메시지 파일을 조회한다. 

basename 으로 messages 를 지정 했으므로 `messages.properties` 파일에서 데이터 조회한다.

<br/>

## 테스트 코드2

`"no_code"` 를 못찾으면, 디폴트 메시지인 "기본 메시지" 가 `result`로 들어가게 된다.

```java
@Test
void notFoundMessageCodeDefaultMessage() {
	String result = ms.getMessage("no_code",null,"기본 메시지",null);
	Assertions.assertThat(result).isEqualTo("기본 메시지");
}
```

<br/>

## 테스트 코드3

`new Object[]{"Spring"}` 는 설명.

`messages.properties` 파일에 

```java
hello=안녕
hello.name=안녕 {0}
```

`hello.name=안녕 {0}` 의 { } 부분에 “Spring” 을 치환 하는 것이다.

```java
@Test
void argumentMessage() {
   String message = ms.getMessage("hello.name", new Object[]{"Spring"}, null);
   Assertions.assertThat(message).isEqualTo("안녕 Spring");
}
```

<br/>

## 테스트 코드4
```java
@Test
void defaultLang() {
    Assertions.assertThat(ms.getMessage("hello", null, null)).isEqualTo("안녕");
    Assertions.assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("안녕");
}

@Test
void enLang() {
    Assertions.assertThat(ms.getMessage("hello", null, Locale.ENGLISH)).isEqualTo("hello");
}
```

<br/>

>**Reference** <br/>스프링 MVC 2편 - 백엔드 웹 개발 활용 기술 - https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-2
